What are the best command-line tools for managing a small Linux cluster?
This is a really big question. When it comes to cluster management, in my opinion, five things need to be well-organized. How to represent a set of nodes. How to deploy software/data to a set of nodes. How to execute commands on a set of nodes. How to synchronize configuration on a set of nodes. How to monitor the health status of a set of nodes. The last three items have many good open source solutions. There are many tools for parallel command execution, for example, pssh(http://www.theether.org/pssh/) or GNU parallel (http://www.gnu.org/software/para...) which is more than parallel command execution. There are also tools for synchronization like puppet(http://www.puppetlabs.com/) and cfengine(http://www.cfengine.org/). But, frankly speaking, I never use them, I have my home-made perl scripts to do that. For monitoring, RRDtool(http://oss.oetiker.ch/rrdtool/) is simple and powerful if you like to DIY a monitor system yourself. Other software like cacti(http://www.cacti.net/), nagios(http://www.nagios.org/), zabbix(http://www.zabbix.com/ are easy to setup and fit sophisticated network environments. However, their advanced features may need a small fee. In some cases, the first two items are sophisticated. For software/data deployment, if their size is relatively small, for example, less than 1GB, it is not a big problem for normal tools like pscp from pssh toolset. However, if the size of data is big, in my case, I used to deploy an average of 10GB+ data for over 1000 nodes each day, the bandwidth of the source or in-middle switchers will become bottlenecks. You may need to utilize BitTorrent or use a so-called "Multiphasic" solution (1 node -> 2nodes, 2nodes->4nodes, 4->8, ....) to overcome it and make the deployment fast and reliable. The last and the most important thing is how to represent a set of nodes. Currently, I haven't seen a good open source solution (maybe I did not keep searching for it). If a comma separated hostname list is enough for your case, pssh is ready. For example pssh -h host1,host2,host3,host4 uptime. For my clusters, I have a perl script and a database to help with it. For example, I could use mssh -h @SEARCH1A uptime to get all uptimes in SEARCH1A cluster. I could also use mssh -h @SEARCH1A:INDEXER '/opt/indexer/restart.sh' to restart all indexers in SEARCH1A cluster.    Embed Quote 