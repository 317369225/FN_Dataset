★What is the best way to store time series data in MongoDB?
Many companies are using MongoDB for storing time-series data. Especially, its Capped Collection[1] feature is really useful because it automatically purges old data to keep the data fit into the memory. People aggregates the results by normal grouping or MapReduce, but they're not that fast. Especially MongoDB's MapReduce only works within a single thread and its JavaScript execution overhead is huge. New aggregation framework[2] could solve this problem. Another concern is high write through put. Although MongoDB's insert is fire-and-forget style by default, calling a lot of insert command causes a heavy lock contention. This prevents the readers to aggregate / filter the data. One solution might be using the log collector framework such as Fluentd[3] or Logstash[4] for 'batch + asynchronous' insertion. Disclaimer: I'm a committer of Fluentd project. [1] Capped Collections [2] Aggregation Framework [3] Store Apache Logs into MongoDB [4] open source log management    Embed Quote