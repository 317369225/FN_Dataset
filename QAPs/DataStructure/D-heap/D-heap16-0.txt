Does anyone deal with such problems as setting -Xmx argument in Java more than 40 gb?I think that this does not work for me, because after exceeding 10 gb, it throws Java Heap Space exception?
As you mention 10GB, I assume you're passing the "-server -d64" parameters. Also for -Xmx40G I expect the machine to have 64GB. Setting a bigger mx than the physical memory and relying on swap is, in my opinion, kind of worthless. The biggest I've worked with was a 32GB machine and a -Xmx=24G. Java has a tendency to use more than the mx value due to classes PermGen (not much though) and in case MMAP is used. Any chance your server is crashing due to MMAP (DirectByteBuffer) exceeded memory, and not the core heap? You can run your server with -XX:+HeapDumpOnOutOfMemoryError and when the server crashes, use some app to analyse the "memory leak", like jhat. 