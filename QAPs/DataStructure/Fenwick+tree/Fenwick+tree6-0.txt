Why is the function RangeUpdate() for a Fenwick Tree not giving the correct output?
Of course, it doesn't work, what you are trying to do is wrong. If you understand Fenwick tree as a black box, it can support the following operations: Set(A, i, v): Set the value of A(i) = A(i) + v. Sum(A, i): Calculate Sum( A(1) + A(2) + ... A(i) )These are the only basic operations that Fenwick tree supports. To calculate range sum, you have: RangeSum(A, i, j) = A(i) + ... + A(j) = Sum(A, j) - Sum(A, i-1) So at this point, you can use Fenwick tree for point update and range sum. Equivalently, you can use Fenwick tree for range update and point value, i.e. you can tweak a bit and have Fenwick tree do the following operations: RangeUpdate(A, i, j, v): Update the values of A(i), A(i+1), ..., A(j), by increasing each element by v Get(A, i): get current value of A(i).(Note that at this point, you are NO LONGER able to use the 2 operations Set(A, i, v) and Sum(A, i). Now you are limited to only these 2 operations, RangeUpdate and Get). To do this, think about the difference between 2 consecutive elements: Delta(i) = A(i) - A(i-1)If you consider the array Delta, then the 2 operations become: RangeUpdate(A, i, j, v) --> Set(Delta, i, v) and Set(Delta, j+1, -v) Get(A, i) --> Sum(Delta, i)So at this point, you can have RangeUpdate and Get operations by building Fenwick tree of Delta, but you can no longer use RangeSum and Set operations. It is still possible to have RangeSum, RangeUpdate at the same time, but it is not a straight-forward thing to do, and can not be explained in few lines like this. If you are interested, you can read about it here: Fenwick Tree Lazy Propagation - Codeforces and Algorithms Weekly by Petr Mitrichev. But since you're probably new to Fenwick tree, I would recommend to limit the use of Fenwick tree to only one of two kind I explained before. In case you really need to use RangeSum and RangeUpdate at the same time, it is better to use Segment tree, which is much more intuitive for these operations. Updated 11 May • View Upvotes • Asked to answer by Anonymous