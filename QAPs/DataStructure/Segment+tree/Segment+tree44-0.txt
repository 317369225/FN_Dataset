What is an approach to solve the problem DQUERY of SPOJ using BIT/Segment Tree?
I solve it by using segment tree. First of all read all the numbers and query.Then merge position of numbers  and ending indexes of query in ascending order. Start from index one of sorted array if index belong to our given array then insert one into segment tree.  If a number is repeated again then simply change the previous index of that number in segment tree to zero. and If we encounter a index representing r of query then simply query in segment tree for sum from l to r. for more detail check my code here Ideone.com if any query u have then feel comfartable to ask. 