What is wrong with my implementation of segment trees?
The Error lies in the region where you are making changes to parent node if the lazy flag is true and then making the lazy flag for the children nodes true. Suppose , take a case when the lazy flag of the child node was already true then on this query operation the coins will be flipped again and hence the lazy flag for the child node would become false again. I have attached the code snippet with the changes done. if(r!=l)        {            tree[2*n+1].lazy=tree[2*n+1].lazy^1;            tree[2*n+2].lazy=tree[2*n+2].lazy^1;        } Here if the lazy flag for the child node is true already it would become false. Make these changes at all places where u have applied the lazy propagation. Note Now , the code gets accepted on codechef. Also , i feel this is not the right place to get your codes debugged. Please post codes on help forums of codechef , topcoder for proper help and guidance. 