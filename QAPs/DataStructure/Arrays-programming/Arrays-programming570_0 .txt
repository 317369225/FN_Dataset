How do I implement adaptive vector/array to store different type of integers in a memory conservative way?For example if all integers that are inserted so far can be represented in int8, memory consumption should be (1 byte)*element count. But when the first int16 comes, it should adaptively handle it internally. Is these a related paper or implementation that you can suggest? Thanks.I can imagine several ways such a data structure could be built but without knowing more about how the structure is intended to be used it is hard to evaluate which tradeoffs would be appropriate to make. I'd really be asking myself very hard - why is the memory saving required? If the array lengths really are up to 2^33 ~= (10^10), you are prepared to access it serially and you can't afford the extra 2^33 bytes required to use 2 bytes per integer, perhaps what you actually need is a compression algorithm. 129 Views