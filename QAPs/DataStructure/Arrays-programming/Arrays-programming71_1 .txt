How do I duplicate an array based on a condition in php?There are two ways, 1 you can write two different queries for Jr and Sr conditions and store them in two arrays. This will take load on DB server, but processing free Other one is, store them in two arrays running an iteration. This will call DB only once but processing time taken. Let me make you clear on second way <?php $query = "SELECT * FROM staff_list WHERE XXXX ORDER BY id_pdo"; $invi_stmt = $db->prepare($query); $invi_stmt->execute(); $invigilators = $invi_stmt->fetchAll(PDO::FETCH_ASSOC); $sr_staff=$jr_staff=$used_staff=array(); //initialization foreach($invigilators as $invi){ if($invi['slevjs_pdo']==1){//Sr staff array_push($sr_staff,$invi['sid_pdo']); //prepares an array of Sr staff }else if($invi['slevjs_pdo']==2){//Jr staff array_push($jr_staff,$invi['sid_pdo']); //prepares an array of Jr staff } }  //Inside your table  $temp_invi = array(); $random_sr = (count($sr_staff)>0)?array_rand($sr_staff,1):-1; //select 1 Sr staff if($random_sr>=0){ array_push($temp_invi,$sr_staff[$random_sr]."*"); unset($sr_staff[$random_sr]); } $random_jr1 = (count($jr_staff)>0)?array_rand($jr_staff,1):-1; //select 1st Jr staff if($random_jr1>=0){ array_push($temp_invi,$jr_staff[$random_jr1]); unset($jr_staff[$random_jr1]); } $random_jr2 = (count($jr_staff)>0)?array_rand($jr_staff,1):-1; //select 2nd Jr staff if($random_jr2>=0){ array_push($temp_invi,$jr_staff[$random_jr2]); unset($jr_staff[$random_jr2]); }  if(count($temp_invi)) echo implode(", ",$temp_invi); // This gives your output else echo "--";  ?> When I run this for 10 rows table the following output came, where * indicates Sr staff, -- means no invigilator available. You can restrict number of invigilators at line 34 by checking count of $temp_invi. 6*, 11, 3 7*, 9, 5 8*, 4, 10 1*, 13 2* 12* -- -- -- -- Hope this helps you :) 149 Views  View Upvotes