How do I find sum of all subsets of a range in an array?Given an array A of N elements and Q queries of type [ l, r ]. Print the sum of each subset in the range { A[l], A[r] }. For example: A[]= { 1, 2, 3, 4 } and [ l,r ]= [ 1, 3 ] then print sum( 1 ), sum ( 2 ), sum( 3 ), sum( 1,2 ), sum( 1,3 ), sum( 2,3 ), sum( 1,2,3 )I think the problem statement will have one more condition: the array A will have only distinct elements, otherwise it will be more difficult. Now you just need to build a static segment tree, where each node stores the sum of all subsets in the corresponding segments. You can check out my tutorial on segment trees: A simple approach to segment trees. The code there can be readily modified to solve this problem. Space complexity will be O(N)  O(N) and time complexity O(N+QlogN)  O(N+QlogN) , O(N)  O(N) for building the tree and O(QlogN)  O(QlogN) for the Q queries. When we are building a segment tree, we just need to know what data do we want to store in each node and how do we combine data stored in children nodes to find what to store in the parent node. For this problem, we need to store only 1 value in each node: the sum of all subsets in that segment. For the leaf nodes, this is easy: it's the element itself. For internal nodes, we need to be able to use the values of the children nodes to find this value. Suppose the two children nodes have values a and b and sizes (number of elements in this segment e.g., [1-3] has size 3) x and y respectively. Then, the value of parent node is: a∗2 y +b∗2 x   a∗2y+b∗2x . This is all that is needed to solve this problem. If you have trouble figuring out where that formula came from, see that the every  subset in the first set of subsets is repeated for every subset in the second set, giving us a∗2 y   a∗2y . Similarly for the second set of subsets, giving us this symmetric formula. PS: I was asked the same question on my blog as well but by a different person, weird! Thanks Uma Priyadarsi for mentioning my blog in his answer. Edit: Since the output and the intermediate values will be huge, I think the problem statement will likely ask for output modulo some number. Addition and multiplication are closed under modulo so you can just take mod everywhere. 800 Views · View Upvotes · Answer requested by Suraj Bora