What are the main factors at play to work out the optimal launch timing and trajectory of a rocket travelling to the ISS?
The first thing that has to happen is to find an opening in the dense traffic pattern for ISS visiting vehicles and examine the flight rules to identify any exclusions.  For example, the HTV and Cygnus utilize the same ISS proximity communication device, which rules out having one launch while the other is leaving.  Once we've narrowed down a general opening, we need to determine the launch windows for that period.  The composite launch window is a combination of the phase window and the planar window. Phase Window The phase angle is the angular measurement of how far ahead or behind the ISS is with respect to the visiting vehicle, at the point where the orbital planes of the two vehicles intersect.  Once the visiting vehicle is in orbit, the phase angle is reduced to zero so that the visiting vehicle can dock or be berthed.  Orbital velocity is defined by orbital altitude - lower orbits move faster than higher orbits.  That means that the visiting vehicle must fly below the ISS to catch up, if the phase angle puts the ISS ahead of the visiting vehicle and it means the visiting vehicle must fly above the ISS to allow the ISS to catch up with it, if the phase angle puts the ISS behind the visiting vehicle. So, we have two variables to consider here: 1) How long are we willing to allow the rendezvous to take?  The longer it can take, the larger the permissible phase angle.  Cargo vehicles might take a week to rendezvous whereas we want crewed vehicles to rendezvous within a day or so. 2) How much fuel can the visiting vehicle afford to expend on the maneuvers used to reduce the phasing angle? Those two variables will help us determine the maximum phase angle we are willing to have.  And that will define the phase window.  Because the vehicles do not start at the same altitude, the phase angle can be greater than 360 degrees. Planar Window Because the Earth is not a perfect sphere, an orbit will experience nodal regression, meaning the orbital plane will rotate in inertial space.  This rotation rate varies with altitude and inclination.  So, the visiting vehicle, while it is below the ISS will experience a higher nodal regression than the ISS and while it is above the ISS it will experience a lower nodal regression rate.  The analysts on the ground identify what is called a “phantom plane”.  This is the plane they can launch the vehicle into that will naturally regress into the orbital plane of the ISS not long before the planned rendezvous. So, ideally, launch is timed to occur when the main engine of the visiting vehicle completes its burn (MECO - Main Engine Cut Off)  just as the phantom plane passes over the launch site (this is called the “in-plane time”).  This optimizes propellant usage.  We can’t really insist on launching at exactly that moment, so we determine the amount of yaw steering the vehicle can support.  Yaw steering steers the ascending vehicle, in the cross-track direction, into the phantom plane if it is ahead or behind the ascent trajectory. Planar window must also account for components of the launch vehicle that will fall to Earth.  The area where components such as boosters may fall is partially defined by the longitude of the descending node. So, we superimpose the two graphs (phase window and planar window) and the areas where they overlap are the acceptable launch window.  Here is an example from the Shuttle. Other Factors There are other factors that can influence the plan.  Lighting is an important factor.  We want the two vehicles to be able to see each other clearly.  Since an orbit for the ISS is about 90 minutes long, small burns done by the visiting vehicle can change the lighting situation.  One factor that can’t be dealt with on orbit is the beta angle.  Beta angle is the angle between the orbital plane and the ecliptic plane.  For the ISS it can range from -75 to +75 (51.6 degrees because of the inclination of the orbit and 23.4 degrees because of the tilt of the Earth).  Most vehicles have a beta cutout window of about 60 degrees - that’s a window during which we don’t want to have the visiting vehicle active (at high beta angles, the vehicle is in constant or near constant insolation and thus experiences higher thermal loading.  Active systems, like thrusters, can overheat).  That excludes launching for a few weeks, a couple of times a year.  Here's an (outdated) example traffic plan illustration for the ISS showing beta angle. Mission objectives can affect the timeline, such as cargo.  If the payload experiments include volatile items such as living organisms like zebrafish or mice, the payload scientists and veterinary experts will set requirements on how long the animals can be in the environment of the visiting vehicle without jeopardizing their wellbeing.  The length of the mission can be a factor.  Visiting vehicles are certified for a maximum mission duration, such as 180 days.  If the mission requirements are that, say, 173 of those days be used while the vehicle is attached, then ascent and descent combined must be seven days or less. 