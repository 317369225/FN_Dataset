What are the best applications of linearity of expectation?
Here's a few cute examples involving permutations. What is the expected number of fixed points in a permutation π  of (1,2,…,n)  ? Let I k   denote the indicator random variable that is 1    if π(k)=k  , and 0 otherwise. It is clear that E[I k ]=1n   . By linearity of expectation, E[I 1 +I 2 +⋯+I n ]=∑ n k=1 E[I k ]=∑ n k=1 1n =1.  So the expected number of fixed points in a permutation is independent of the number of elements in the permutation. What is the expected number of cycles in a permutation π  of (1,2,…,n)  ? Let X k =1l   , where the length of the cycle including k  is l  . Let X=X 1 +X 2 +⋯+X n   . We want to compute E[X]  , since each cycle of length l  contributes a total of l⋅1l =1  to the sum. We'll compute X k   for some k  . For each l  , the probability that k  is in a cycle of length l  is n−1n ⋅n−2n−1 ⋅⋯⋅⋅n−l+1n−l+2 ⋅1n−l+1 =1n .  It follows that E[X k ]=∑ n i=1 1ni =1n H n   , where H n   denotes the n  th harmonic number. By linearity of expectation, E[X]=∑ n k=1 E[X k ]=H n ,  which is roughly lnn  . Let (a 1 ,a 2 ,…,a n )  be a random permutation of (1,2,…,n)  . What is the expected number of distinct values in {max 1≤i≤n (a 1 ,…,a i )}  ? For each 1≤k≤n  let I k   denote the indicator random variable that is 1  if max 1≤i≤k (a 1 ,…,a i )≠max 1≤i≤k−1 (a 1 ,…,a i )  , and 0 otherwise. Then I k   is 1  if a k   is larger than each of a k−1 ,…,a 1   , which occurs with probability 1k   . By linearity of expectation, E[I 1 +I 2 +⋯+I n ]=∑ n k=1 E[I k ]=∑ n k=1 1k =H n ,  which is roughly lnn  . Updated 10 Feb • View Upvotes