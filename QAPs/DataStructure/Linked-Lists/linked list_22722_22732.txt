how do i choose a optimal cell size when search for close pair of point , and use cell to implement this ? let s start with a special case , $ k = 2 $ , and a bunch of assumption . let s assume that you grid be a dense $ k $ dimensional square array of cell , and each cell contain some relatively simple implementation of a set of point -lrb- for example , a link list of point . -rrb- let s also stick with euclidean distance , assume you don t care about the edge condition -lrb- point that move outside the grid -rrb- , and that the point be independently uniformly randomly distribute . i m also go to assume you know the average density -lrb- in term of expect number of point within a sphere of radius $ t $ -rrb- . now let s look at the two extreme case . if you make you cell too small then most of the cell will be empty , and you ll spend most of you time iterate through empty cell . if you make you cell too large then you will do a larger number of extra distance computation for point that be farther than $ t $ away . i can t think of any reason you would want you cell to be larger than $ t \ time t $ . with $ k = 2 $ and cell of this size you need search 9 cell . that s a search area of $ -lrb- 3t -rrb- ^ k $ . with cell of size $ t\/2 \ time t\/2 $ you need to search 25 cell . that s a search area of $ \ frac -lcb- 25 -rcb- -lcb- 4 -rcb- t ^ 2 $ . with cell of size $ t\/m \ time t\/m $ you need to search approximately $ -lrb- 2m +1 -rrb- ^ k $ cell , and the area you search be $ -lrb- \ frac -lcb- 2m +1 -rcb- -lcb- m -rcb- t -rrb- ^ k $ , so in the limit you be get arbitrarily close to $ -lrb- 2t -rrb- ^ k $ . -lrb- when $ m $ get sufficiently large you may be able to avoid search some of the cell in the corner , but i m ignore that too . -rrb- this be where the density , $ \ delta $ , -lrb- the average number of point in a volume of $ t ^ k $ -rrb- come in . if the cost of iterate over a empty cell be similar to the cost of do a distance calculation , then you be try to minimize $ $ -lrb- 2m +1 -rrb- ^ k + \ delta -lrb- \ frac -lcb- 2m +1 -rcb- -lcb- m -rcb- -rrb- ^ k $ $ . take the derivative with respect to $ m $ , set it equal to 0 , and solve for $ m $ and you get something like $ \ hat -lcb- m -rcb- ^ -lcb- k +1 -rcb- = \ delta\/2 . $ 