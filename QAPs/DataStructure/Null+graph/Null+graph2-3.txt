How does 'grep' preprocess a text file for efficient regular expression matching?
The answers explaining how grep constructs DFAs/NFAs for the passed regular expression are correct. I have only one addition: *fgrep* is a special mode where the input is not a regular expression but rather a set of strings separated by new lines. This mode of grep (or fgrep or grep -f) constructs a trie with prefix function computed for each node (this data structure is also known as Ahoâ€“Corasick string matching algorithm). Then fgrep walks over input text one symbol in a time. So this mode doesn't preprocess text but rather builds an efficient data structure for the strings we are looking for. 