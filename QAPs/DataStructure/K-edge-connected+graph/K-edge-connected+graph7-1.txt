What are the best applications of linearity of expectation?
Another cute example: Al plays a solitaire game. He starts with a rooted tree. On a single move, he selects one of the remaining vertices in the tree uniformly at random, and removes it along with its entire subtree. The game ends when he removes the root vertex. Determine, as a function of the tree, the expected length of the game. Solution: It's quite tedious to do this using the basic definition of expected value. Instead, note that a vertex is removed when either it is selected or one of its ancestors is selected, and all these happen with equal probability. Thus, the probability that a node is selected is [math]\frac{1}{\text{depth} + 1}[/math], so the expected number of selected nodes (i.e. the expected number of moves) is [math]\sum_{\text{vertex }v}\frac{1}{\text{depth}_v + 1}[/math] Source: Problem - 280C - Codeforces Related: 2013-2014 Fall OMO #29 