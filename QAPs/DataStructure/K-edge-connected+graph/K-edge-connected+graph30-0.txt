How many ways are there to add N edges to a given labeled cycle graph with 2N vertices to make a cubic graph?
Our cubic graph must be the superimposition of the cycle with a matching (a graph where every vertex has degree 1). How many matchings are there on [math]2N[/math] vertices?  The first vertex must be connected to one of the other [math]2N - 1[/math] vertices.  Once we’ve done that, the next not-yet-connected vertex must be connected to one of the other [math]2N - 3[/math] not-yet-connected vertices.  Then the next, to one of the other [math]2N - 5[/math], and so on.  The number of ways to do this is   [math](2N - 1)(2N - 3)\cdots 3 \cdot 1 = (2N - 1)!! = \tfrac{(2N)!}{N! 2^N}[/math] (where [math]k!![/math] is the double factorial function). However, this overcounts the answer because superimposing some of these matchings onto the cycle might yield a multigraph that isn’t a graph—we might get two copies of an edge between the same pair of vertices. To find out how much we overcounted by, we’ll invoke the principle of inclusion-exclusion.  Number the edges in the cycle [math]1, \ldots, 2N[/math].  Let [math]S[/math] be the set of all [math](2N - 1)!![/math] multigraphs we just found, and let [math]T_i \subset S[/math] be the set of those multigraphs with edge [math]i[/math] doubled.  Then the number of graphs in [math]S[/math] that aren’t multigraphs is   [math]\left|S \smallsetminus \bigcup_{i=1}^{2N} T_i\right| = \sum_{k=0}^{2N} (-1)^k \sum_{1 \le i_1 < \cdots < i_k \le 2N} \left|\bigcap_{j=1}^k T_{i_j}\right|[/math]. Since two adjacent edges cannot be doubled, [math]T_i \cap T_{i + 1} = T_{2N} \cap T_1 = \varnothing[/math].  How many ways are there to pick [math]k[/math] edges [math]i_1, \ldots, i_k[/math] of the cycle such that no two are adjacent?  A simple stars-and-bars–like argument gives [math]\tbinom{2N - k}{k} + \tbinom{2N - k - 1}{k - 1} = \tfrac{2N}{2N - k}\tbinom{2N - k}{k}[/math]. Having picked such [math]i_1, \ldots, i_k[/math], each element of [math]\textstyle \bigcap_{j=1}^k T_{i_j}[/math] is the superimposition of the cycle with the doubled edges [math]i_1, \ldots, i_k[/math] and one of the [math](2(N - k) - 1)!![/math] matchings on the other [math]2(N - k)[/math] vertices. So the number of graphs is   [math]\sum_{k=0}^{N} (-1)^k \tfrac{2N}{2N - k}\tbinom{2N - k}{k} (2(N - k) - 1)!![/math]. Updated 138w ago • View Upvotes