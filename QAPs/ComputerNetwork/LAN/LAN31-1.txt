★How does Dropbox LAN Sync work and protect users' privacy when they enable this over a shared LAN?
Working on building a similar LAN syncing platform for almost a month now, I can probably share some insights as I have gone through all the publicly available information about it [and had unknowingly mimicked its LAN architecture, even before I read about it]. Step 1: Discover other Dropbox clients on LAN Dropbox sends a broadcast across your LAN every few seconds. For  example, if I look at a packet capture for my LAN I see "[source IP]  255.255.255.255 DB-LSP-Dropbox LAN Sync Discovery Protocol" every 30  seconds (Thats a LOT of packets over your LAN for even 5 clients). Whenever a Dropbox clients starts on a system, it starts UDP broadcast, with the service name "Dropbox LAN Sync Discovery Protocol", to make it discoverable to all the Dropbox peers available on LAN and captures packets with the same service name to identify all the peers. Note: Publicly available data and and experiments conducted by security experts indicates Dropbox used fixed port 17500 (contrary to randomly available port as used by many softwares for UDP) and 17500 for TCP. Step 2: Identify authenticated clients (A Guess based on publicly available data and experiments) The current client uses an encrypted SQLite database (with the default value / license key…) and the Windows DPAPI for storing sensitive information. A custom but robust implementation to store sensitive data is also available for MACs. From a network perspective, autoupdates of the clients are signed and they use a hard-coded list of root CAs for establishing the SSL communications. The identified clients communicate with each other over SSL Sockets (TCP) and share data with each other which is then authenticated by the Dropbox servers to identify how one peer connects to the other peer (By identifying Shared data between 2 peers, using shared folders, SHA-256 checksums, etc)Step 3: Fetch files (SPECULATION) When the client connects to dropbox server, it asks for new file operations (Add/Modify/Delete) and the information passed on is in the form of File name, size, Sha-256 Hash [Rolling Cheksum algorithm?] (of the whole file and parts, they are split into 4 MB parts for transfer over WAN), etc. The files are then queried over the available information of peers (files available with peers and accessible to you) and are downloaded accordingly (from the Dropbox servers or peers). The file transfer operation is over a Byte Stream which allows resuming of transfers by starting file transfer from +1 byte till it has been received by the client. Hope this helps. Source(s): ASFWS - A critical analysis of Dropbox software security    Embed Quote