â˜…How can I configure fair bandwidth sharing between cgroups?
Can you switch to BSD? :) You can match traffic by PID using iptables and send that to tc. Google has some tutorials on how to do that. Beyond that on a "general" scale on linux you're kinda hooped afaik. A hacky idea: A distinct connection requires a distinct socket. So, in order to get a new "flow," it needs to open a new socket (read: file handle). Is it a certain UID that is running the application? If so, you can set how many file handles (and therefore, sockets) that a UID is able to open at once by setting it with ulimit, or placing a line in your limits.conf. This might break your application in unexpected ways if it tries to write out a file or something while it has a handful of sockets open though. Most rate-limiting on linux these days is in the application itself, via setting socket receive buffers low and doing fine grained timing of how often polling/retrieval out of that buffer happens. You can look into this if you have control over your application. There's also an old project called "trickle" that does rate limiting on sockets, but not sure if you'll be able to shoehorn that in.