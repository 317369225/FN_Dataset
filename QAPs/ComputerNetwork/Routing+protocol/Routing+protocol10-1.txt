★How do ARP and routing protocols actually work?
Let's start with ii since it is straightforward and easier to understand (and explain). All computers and network connected devices send out ARP queries to find out the physical address (MAC-address) for a given IP-address, the computers and devices store the answers in ARP-tables (each entry has a timeout of x minutes, where x is decided/set by the computer or device). The ARP protocol doesn't leave your segment / VLAN (it is stopped by the closest router or L3 capable switch/swouter). If no reply is heard in your segment, the default gateway will be used to attempt sending the packet to the end location. Now to the harder to explain question i: The normal routed internetworks are setup in the way that normally packets arriving at a router X, router X will know the path to the endpoint. Otherwise it will not advertise the path to the neighboring router Y which in that case wouldn't send the packet to router X. If we contemplate a world where the network administrator has done a mistake (these things DO happen, believe it or not), if the router X doesn't know the path to the endpoint (and not having a default route), it will just drop the packet! In routing we often call this black holing traffic. If router X has a default route set to the router Y which in turn still points at router X, a routing loop will occur. If router X has an interface located in the endpoint matching network, it will (after looking in its' own ARP table) send an ARP query to find the end point MAC-address, before adding the MAC to the ARP table and then forwarding the packet to the correct physical address. I hope this answers your questions.    Embed Quote