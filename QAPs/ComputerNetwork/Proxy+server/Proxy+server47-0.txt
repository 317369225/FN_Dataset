★What should be correct router configuration for proxy servers to work inside IITK network?
So I recently (read: today) got a new router, TP-Link WR841N (recommended by User). The first things to do with it was to upgrade its firmware to OpenWrt, so that I have complete flexibility on the hardware with a full fledged linux running on it :). Now coming to configuration part, it was almost straight forward, this particular router has 1 WAN port and 4 LAN ports and dual antenna wifi, I put up static IP settings for the WAN port (connected to iitk's lan) according to the CC's IP allocation(Hostel's IP Address). I used 172.31.1.130 as primary DNS and 172.31.1.1 as secondary DNS. One of the points to note here is that, you should not be using any public dns at router level (so no 8.8.8.8 or opendns), cause IITK network needs you to be authenticated to gateway before it allows forwarding of packet outside LAN, this would also lead to internal ip's not getting resolved, like those of proxy's. Also, ironport seems to work from a different subnet, so you may need to use the alternate IP configuration of CC (given in the above IP allocation link) to reach it, though, I have been able to reach ironport using normal config in Hall 4. If you are facing problems in reaching specific hosts due to resolution errors, then it may be good idea to dig the ip manually (via `dig hostname @172.31.1.1` command) and add an entry to your hosts file (/etc/hosts on *nix and %windir%/system32/drivers/etc/hosts on Windows) manually. (fun fact: Before advent of DNS, people use to distribute large 'hosts' file for resolution of addresses!). One of the good things with OpenWrt is that, it gives you a complete ssh terminal with a package manager! You can now install python and run the firewall auth script on the router itself ;). Unfortunately, my particular router doesn't have enough free space in Flash memory to install python, but otherwise, it still rocks :D PS: I was not staying at hostel for past 6 months or so, hence didn't want to answer this one earlier! Update: There is alternative for primary DNS, used in CC systems, which is 172.31.1.134, so it can be substituted in place of 1.130.    Embed Quote