â˜…How do you setup an FTP server to do a custom action on file upload?
Not sure if it's necessarily the best way, but one way (in Linux) is to use inotify(7). You can use it to subscribe to a directory, and (on receipt of the proper event, in this case, IN_CLOSE_WRITE or perhaps IN_MOVED_TO). This doesn't solve your first problem, but I bet that VSFTPD has a solution for that. Just make it so the user in question owns the uploaded file (easy, if you're authenticated them already). Then your inotify event handler can do whatever you need to the file, and the name and username will be properties of the file. In case you're not c-ish, look around for an inotify wrapper in your language of choice- there are many. The nice thing (or bad thing, depending on your viewpoint) about this solution is it decouples the handler from the ftp server.