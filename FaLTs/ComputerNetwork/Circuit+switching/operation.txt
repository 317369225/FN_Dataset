A Simplified TCP State Diagram. See TCP EFSM diagram for a more detailed state diagram including the states inside the ESTABLISHED state.
TCP protocol operations may be divided into three phases. Connections must be properly established in a multi-step handshake process (connection establishment) before entering the data transfer phase. After data transmission is completed, the connection termination closes established virtual circuits and releases all allocated resources.
A TCP connection is managed by an operating system through a programming interface that represents the local end-point for communications, the Internet socket. During the lifetime of a TCP connection the local end-point undergoes a series of state changes:[12]
LISTEN  (server) represents waiting for a connection request from any remote TCP and port. SYN-SENT  (client) represents waiting for a matching connection request after having sent a connection request. SYN-RECEIVED  (server) represents waiting for a confirming connection request acknowledgment after having both received and sent a connection request. ESTABLISHED  (both server and client) represents an open connection, data received can be delivered to the user. The normal state for the data transfer phase of the connection. FIN-WAIT-1  (both server and client) represents waiting for a connection termination request from the remote TCP, or an acknowledgment of the connection termination request previously sent. FIN-WAIT-2  (both server and client) represents waiting for a connection termination request from the remote TCP. CLOSE-WAIT  (both server and client) represents waiting for a connection termination request from the local user. CLOSING  (both server and client) represents waiting for a connection termination request acknowledgment from the remote TCP. LAST-ACK  (both server and client) represents waiting for an acknowledgment of the connection termination request previously sent to the remote TCP (which includes an acknowledgment of its connection termination request). TIME-WAIT  (either server or client) represents waiting for enough time to pass to be sure the remote TCP received the acknowledgment of its connection termination request. [According to RFC 793 a connection can stay in TIME-WAIT for a maximum of four minutes known as a MSL (maximum segment lifetime).] CLOSED  (both server and client) represents no connection state at all.
